# üöÄ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ: –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –¢–ó v2.1

## ‚úÖ –ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:

### 1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `vehicle_details` —Å–æ–∑–¥–∞–Ω–∞ —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏
- ‚úÖ –ü–æ–ª–µ `listing_type` –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ `listings`
- ‚úÖ –†–æ–ª—å `agency` ‚Üí `dealer` –≤ —Ç–∞–±–ª–∏—Ü–µ `users`

### 2. **–ú–æ–¥–µ–ª–∏**
- ‚úÖ `VehicleDetail` - –ø–æ–ª–Ω–∞—è –º–æ–¥–µ–ª—å —Å fillable, casts, —Å–≤—è–∑—è–º–∏, scope-–º–µ—Ç–æ–¥–∞–º–∏
- ‚úÖ `Listing` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–≤—è–∑—å —Å VehicleDetail, scopes, –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ Meilisearch
- ‚úÖ `User` - –º–µ—Ç–æ–¥—ã isDealer(), –ª–∏–º–∏—Ç—ã

### 3. **–ü–∞—Ä—Å–µ—Ä –∞—É–∫—Ü–∏–æ–Ω–æ–≤**
- ‚úÖ `AuctionParserService` - –ø–∞—Ä—Å–∏–Ω–≥ Copart –∏ IAAI
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ: make, model, year, mileage, transmission, fuel_type, color, engine_displacement_cc, body_type
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

### 4. **API**
- ‚úÖ `POST /api/v1/dealer/listings/fetch-from-url` - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ `AuctionListingController` - –≤–∞–ª–∏–¥–∞—Ü–∏—è, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏, fallback
- ‚úÖ Middleware: auth:sanctum

### 5. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/listings/create-from-auction` - —Ñ–æ—Ä–º–∞ —Å –ø–æ–ª–µ–º URL
- ‚úÖ AJAX –∑–∞–ø—Ä–æ—Å –∫ API
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, loader
- ‚úÖ –†–æ—É—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω

---

## üß™ –ü–õ–ê–ù –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ—É—Ç–æ–≤
```bash
cd /home/vov/flipp-am && php artisan route:list --path=listings
```
‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –†–æ—É—Ç `listings/create-from-auction` –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ API —Ä–æ—É—Ç–∞
```bash
cd /home/vov/flipp-am && php artisan route:list --path=api/v1
```
‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç**: API —Ä–æ—É—Ç `/api/v1/dealer/listings/fetch-from-url` –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω

### –¢–µ—Å—Ç 3: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
cd /home/vov/flipp-am && php artisan serve
```
–ó–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π:
- http://localhost:8000 - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- http://localhost:8000/listings/create-from-auction - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å –∞—É–∫—Ü–∏–æ–Ω–∞ (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∫–∞–∫ dealer)

### –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
**–®–∞–≥–∏:**
1. –ó–∞–π–¥–∏ –Ω–∞ —Å–∞–π—Ç: http://localhost:8000
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Å—è –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ä–æ–ª—å—é `dealer`
3. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞: http://localhost:8000/listings/create-from-auction
4. –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –ø–æ–ª–µ–º –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ URL

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –§–æ—Ä–º–∞ —Å –ø–æ–ª–µ–º "–°—Å—ã–ª–∫–∞ –Ω–∞ –∞—É–∫—Ü–∏–æ–Ω"
- –ö–Ω–æ–ø–∫–∞ "–ò–∑–≤–ª–µ—á—å –¥–∞–Ω–Ω—ã–µ"
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### –¢–µ—Å—Ç 5: –¢–µ—Å—Ç API –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```bash
curl -X POST http://localhost:8000/api/v1/dealer/listings/fetch-from-url \
  -H "Content-Type: application/json" \
  -H "Accept: application/json" \
  -d '{"url":"https://www.copart.com/lot/12345"}'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç—É—Å: 401 Unauthorized (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

### –¢–µ—Å—Ç 6: –°–æ–∑–¥–∞–Ω–∏–µ dealer –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
cd /home/vov/flipp-am && php artisan tinker
```
–ó–∞—Ç–µ–º –≤ tinker:
```php
$user = App\Models\User::find(1); // –∏–ª–∏ —Å–æ–∑–¥–∞–π –Ω–æ–≤–æ–≥–æ
$user->role = 'dealer';
$user->save();
exit
```

### –¢–µ—Å—Ç 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
**–®–∞–≥–∏:**
1. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Å—è –∫–∞–∫ dealer (–∏–∑ –¢–µ—Å—Ç–∞ 6)
2. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞: http://localhost:8000/listings/create-from-auction
3. –í—Å—Ç–∞–≤—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Å—ã–ª–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: https://www.copart.com/lot/12345)
4. –ù–∞–∂–º–∏ "–ò–∑–≤–ª–µ—á—å –¥–∞–Ω–Ω—ã–µ"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ï—Å–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ —É–¥–∞–ª—Å—è (–Ω–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ Copart) ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ "–ù–µ —É–¥–∞–ª–æ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ—á—å –¥–∞–Ω–Ω—ã–µ"
- –ï—Å–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥ —É–¥–∞–ª—Å—è ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è —Å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

---

## üìã –ß–¢–û –û–°–¢–ê–õ–û–°–¨ –î–û–î–ï–õ–ê–¢–¨ (–¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞):

### 1. –û–±–Ω–æ–≤–∏—Ç—å —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
–§–∞–π–ª: `resources/views/listings/create.blade.php`
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –¥–ª—è `vehicle_details`: make, model, year, mileage, transmission, fuel_type, body_type, engine_displacement_cc, exterior_color
- JavaScript –¥–ª—è –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∏–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### 2. –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥ `store()` –≤ ListingController
- –û–±—Ä–∞–±–æ—Ç–∫–∞ `listing_type='vehicle'`
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏ –≤ `vehicle_details`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π —Å –∞—É–∫—Ü–∏–æ–Ω–∞

### 3. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–∫–∞–∑–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
–§–∞–π–ª: `resources/views/listings/show.blade.php`
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ `vehicle_details`
- –ö–Ω–æ–ø–∫–∞ "–°–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –∞—É–∫—Ü–∏–æ–Ω–µ" (–µ—Å–ª–∏ `is_from_auction=true`)

### 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Meilisearch
- –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—É–µ–º—ã–µ –ø–æ–ª—è: make, model, year, transmission, fuel_type, mileage, listing_type
- –ü–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω–¥–µ–∫—Å: `php artisan scout:import "App\Models\Listing"`

---

## üêõ –ò–ó–í–ï–°–¢–ù–´–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø:

1. **–ü–∞—Ä—Å–∏–Ω–≥ –∞—É–∫—Ü–∏–æ–Ω–æ–≤** - CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä—ã –ø—Ä–∏–º–µ—Ä–Ω—ã–µ, –Ω—É–∂–Ω–æ —É—Ç–æ—á–Ω—è—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö Copart/IAAI
2. **–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏** - –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è URL'—ã, –Ω–æ –Ω–µ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
3. **Middleware sanctum** - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –Ω—É–∂–µ–Ω —Ç–æ–∫–µ–Ω –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ–±-—Å–µ—Å—Å–∏—é

---

## üîç –ë–´–°–¢–†–ê–Ø –ü–†–û–í–ï–†–ö–ê:

–ó–∞–ø—É—Å—Ç–∏:
```bash
cd /home/vov/flipp-am && php artisan serve
```

–ó–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
1. http://localhost:8000/register - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ß–µ—Ä–µ–∑ tinker —Å–º–µ–Ω–∏ —Ä–æ–ª—å –Ω–∞ dealer (–¢–µ—Å—Ç 6)
3. http://localhost:8000/listings/create-from-auction - –ø—Ä–æ–≤–µ—Ä—å —Å—Ç—Ä–∞–Ω–∏—Ü—É

---

## ‚úÖ –ò–¢–û–ì:

**–ì–û–¢–û–í–û:**
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- ‚úÖ –ú–æ–¥–µ–ª–∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ü–∞—Ä—Å–µ—Ä —Å–æ–∑–¥–∞–Ω
- ‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –†–æ—É—Ç—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ö—ç—à–∏ –æ—á–∏—â–µ–Ω—ã

**–°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì:**
–ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π —Å—Ç—Ä–∞–Ω–∏—Ü—É `/listings/create-from-auction` —Å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º dealer-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º!

```bash
cd /home/vov/flipp-am && php artisan serve
```

